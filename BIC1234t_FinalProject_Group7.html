<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Recipelah – Student Version</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <button id="themeToggle" class="btn btn-outline-brand">D</button> 
  
  <style>
    :root{
      --brand:#ef4444;
      --brand-2:#f97316;
      --rounded:1rem;
    }
      [data-theme="dark"] {
     --brand: #ef4444;
     --brand-2: #f97316;
     --bg-color: #1c1c1e;
     --text-color: #eee;
    }
    
    body{font-family: Inter,system-ui,sans-serif;}
    body {background-color: var(--bg-color); color: var(--text-color);}
    .hero{
      background: radial-gradient(1000px 500px at 10% -10%, rgba(239,68,68,.18), transparent),
                  radial-gradient(800px 400px at 110% -20%, rgba(249,115,22,.18), transparent);
    }
    .hero-card{
      border:0; border-radius:var(--rounded); box-shadow:0 10px 30px rgba(0,0,0,.07);
    }
    .btn-brand{background:var(--brand); color:#fff;}
    .btn-brand:hover{background:#dc2626; color:#fff;}
    .btn-outline-brand{border-color:var(--brand); color:var(--brand);}
    .btn-outline-brand:hover{background:var(--brand); color:#fff;}
    .card{border-radius:var(--rounded); box-shadow:0 6px 18px rgba(0,0,0,.06);}
    .card-img-top{height:180px; object-fit:cover;}
  </style>
</head>
<body>


<nav class="navbar navbar-expand-lg bg-light sticky-top border-bottom">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#home"><span style="color:var(--brand)">Recipelah</span>.com</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#recipes">Recipes</a></li>
        <li class="nav-item"><a class="nav-link" href="#upload">Upload</a></li>
      </ul>
    </div>
  </div>
</nav>


<header class="hero py-5" id="home">
  <div class="container">
    <div class="row align-items-center g-4">
      <div class="col-lg-6">
        <div class="card hero-card p-4">
          <h1 class="fw-bold mb-3">Cook smarter with <span style="color:var(--brand)">Recipelah</span></h1>
          <p class="text-muted">Type ingredients you have (e.g. egg, bread, tomato) and we’ll suggest what to make.</p>
          <div class="input-group input-group-lg">
            <input id="ingredientInput" type="text" class="form-control" placeholder="Your ingredients">
            <button id="findBtn" class="btn btn-brand">Find</button>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <img class="w-100 rounded-4 shadow" src="https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=1200&auto=format&fit=crop" alt="food">
      </div>
    </div>
  </div>
</header>


<section class="py-5" id="recipes">
  <div class="container">
    <h2 class="fw-bold mb-4">Browse Recipes</h2>
    <div id="recipesGrid" class="row g-4"></div>
  </div>
</section>


<section class="py-5 bg-light" id="upload">
  <div class="container">
    <h2 class="fw-bold mb-3">Upload a Recipe</h2>
    <form id="uploadForm" class="card p-4">
      <div class="row g-3">
        <div class="col-md-6">
          <input type="text" class="form-control" id="uTitle" placeholder="Recipe Title" required>
        </div>
        <div class="col-md-6">
          <input type="url" class="form-control" id="uImage" placeholder="Image URL">
        </div>
        <div class="col-md-12">
          <input type="text" class="form-control" id="uIngredients" placeholder="Ingredients (comma-separated)" required>
        </div>
        <div class="col-md-12">
          <textarea class="form-control" id="uSteps" placeholder="Steps (line by line)" required></textarea>
        </div>
        <div class="col-12 text-end">
          <button class="btn btn-brand" type="submit">Submit</button>
        </div>
      </div>
    </form>
  </div>
</section>

<div class="modal fade" id="recipeModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content rounded-4">
      <div class="modal-header">
        <h5 class="modal-title" id="recipeTitle"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <img id="recipeImg" class="w-100 rounded mb-3" alt="">
        <h6>Ingredients</h6>
        <ul id="recipeIngredients"></ul>
        <h6>Steps</h6>
        <ol id="recipeSteps"></ol>
      </div>
    </div>
  </div>
</div>

<footer class="py-4 border-top text-center">
  <p class="mb-0 text-muted">© 2025 Recipelah.com – Student Project</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
let recipes = [
  {
    id: 'r1',
    title: 'Garlic Butter Fried Rice',
    image: 'https://takestwoeggs.com/wp-content/uploads/2024/04/Garlic-Fried-Rice-Sinangag-1.webp',
    time: 15,
    tags: ['quick','budget','lunch'],
    ingredients: ['2 cups cooked rice','2 cloves garlic','1 egg','1 tbsp butter','Soy sauce','Spring onion'],
    steps: [
      'Melt butter, sauté minced garlic until fragrant.',
      'Push aside, scramble egg, then mix with garlic.',
      'Add rice, splash of soy sauce, toss 3–4 mins.',
      'Top with spring onion.'
    ]
  },
  {
    id: 'r2',
    title: 'One-Pot Creamy Tomato Pasta',
    image: 'https://i.pinimg.com/1200x/2e/6d/8d/2e6d8d3f648db6df1df3ac82422753b2.jpg',
    time: 25,
    tags: ['quick','dinner'],
    ingredients: ['200g pasta','1 cup milk','1 cup water','1/2 cup tomato puree','Garlic','Salt & pepper','Cheese'],
    steps: [
      'Simmer pasta with milk, water, and puree.',
      'Season and stir until al dente and creamy.',
      'Finish with grated cheese.'
    ]
  },
  {
    id: 'r3',
    title: 'Veggie Omelette Wrap',
    image: 'https://i.pinimg.com/736x/67/50/f3/6750f3985f3978267ced008bd864a686.jpg',
    time: 10,
    tags: ['quick','vegetarian','breakfast'],
    ingredients: ['2 eggs','1 tortilla','Cherry tomatoes','Spinach','Salt & pepper'],
    steps: [
      'Whisk eggs, season, cook into an omelette.',
      'Add tomatoes & spinach, fold, place in tortilla.',
      'Roll up and serve.'
    ]
  },
  {
    id: 'r4',
    title: 'Budget Chickpea Curry',
    image: 'https://i.pinimg.com/1200x/0a/21/16/0a21164455a8705d5ae0c6036881d287.jpg',
    time: 30,
    tags: ['budget','vegetarian','dinner'],
    ingredients: ['1 can chickpeas','1 onion','2 cloves garlic','Curry powder','Coconut milk','Salt'],
    steps: [
      'Sauté onion & garlic, add curry powder.',
      'Add chickpeas & coconut milk, simmer 15 mins.',
      'Season to taste.'
    ]
  },
  {
    id: 'r5',
    title: 'Crispy Toast with Egg & Sambal',
    image: 'https://images.food52.com/Y5B6F-B9sUdr1TQCc5P33WvEkGc=/7aad7536-6ca8-4fc6-8da4-a03d9ee71bd4--DSC04556_use_this-.jpeg?w=2048&q=75',
    time: 12,
    tags: ['breakfast','budget','quick'],
    ingredients: ['2 slices bread','1 egg','Sambal','Butter'],
    steps: [
      'Toast bread with butter.',
      'Fry egg sunny-side, spread sambal on toast.',
      'Top with egg and serve.'
    ]
  }
];


const savedRecipes = localStorage.getItem('userRecipes');
let userRecipes = savedRecipes ? JSON.parse(savedRecipes) : [];


recipes = [...recipes, ...userRecipes];

const recipesGrid = document.getElementById('recipesGrid');

function renderRecipes(list){
  recipesGrid.innerHTML = "";
  list.forEach((r,i)=>{
    recipesGrid.innerHTML += `
      <div class="col-sm-6 col-lg-4">
        <div class="card h-100">
          <img src="${r.image}" class="card-img-top" alt="${r.title}">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">${r.title}</h5>
            <p class="small text-muted">${r.ingredients.slice(0,3).join(", ")}...</p>
            <div class="mt-auto d-flex gap-2">
              <button class="btn btn-outline-brand flex-grow-1" onclick="openRecipe(${i})">View</button>
              ${r.user ? `<button class="btn btn-danger btn-sm" onclick="deleteRecipe(${i})"><i class="bi bi-trash"></i></button>` : ""}
            </div>
          </div>
        </div>
      </div>`;
  });
}

function openRecipe(i){
  const r = recipes[i];
  document.getElementById('recipeTitle').textContent = r.title;
  document.getElementById('recipeImg').src = r.image;
  document.getElementById('recipeIngredients').innerHTML = r.ingredients.map(x=>`<li>${x}</li>`).join("");
  document.getElementById('recipeSteps').innerHTML = r.steps.map(x=>`<li>${x}</li>`).join("");
  new bootstrap.Modal(document.getElementById('recipeModal')).show();
}

function saveUserRecipes() {
  const userOnly = recipes.filter(r => r.user);
  localStorage.setItem('userRecipes', JSON.stringify(userOnly));
}

function deleteRecipe(i){
  if(confirm("Are you sure you want to delete this recipe?")){
    recipes.splice(i,1);
    saveUserRecipes();
    renderRecipes(recipes);
  }
}


document.getElementById('findBtn').addEventListener('click',()=>{
  const val = document.getElementById('ingredientInput').value.toLowerCase();
  const filtered = recipes.filter(r=>r.ingredients.join(" ").toLowerCase().includes(val));
  renderRecipes(filtered.length?filtered:recipes);
});


document.getElementById('uploadForm').addEventListener('submit',e=>{
  e.preventDefault();
  const ingredients = document.getElementById('uIngredients').value
                      .split(",").map(x=>x.trim()).filter(x=>x);
  const steps = document.getElementById('uSteps').value
                .split("\n").map(x=>x.trim()).filter(x=>x);

  const newRecipe = {
    title: document.getElementById('uTitle').value.trim() || "Untitled Recipe",
    image: document.getElementById('uImage').value.trim() || "https://via.placeholder.com/400x250?text=No+Image",
    ingredients: ingredients.length ? ingredients : ["No ingredients provided"],
    steps: steps.length ? steps : ["No steps provided"],
    user: true
  };

  recipes.push(newRecipe);
  saveUserRecipes();
  renderRecipes(recipes);
  e.target.reset();
});

renderRecipes(recipes);

const btn = document.getElementById('themeToggle');
btn.addEventListener('click', () => {
  if(document.documentElement.getAttribute('data-theme') === 'dark') {
    document.documentElement.setAttribute('data-theme','light');
  } else {
    document.documentElement.setAttribute('data-theme','dark');
  }
});

</script>
</body>
</html>
